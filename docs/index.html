<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Teste de Mindset</title>
  <link rel="stylesheet" href="styles.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.2/html2pdf.bundle.min.js" integrity="sha512-MpDFIChbcXl2QgipQrt1VcPHMldRILetapBl5MPCA9Y8r7qvlwx1/Mc9hNTzY+kS5kX6PdoDq41ws1HiVNLdZA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src="script.js" defer></script>
</head>
<body>
  <!-- CAPA / INTRO -->
  <main id="cover" class="cover" aria-hidden="false">
    <div class="cover-card" role="region" aria-labelledby="coverTitle">
      <h1 id="coverTitle" class="cover-title">Teste de Mindset</h1>
      <p class="cover-sub">Descubra como suas crenças sobre inteligência e talento influenciam sua abordagem diante de desafios e aprendizado.</p>
      <p class="cover-desc">Responda com sinceridade. Não há respostas certas — apenas reflexões sobre sua maneira de encarar esforço, talento e feedback.</p>
      <div class="cover-actions">
        <button id="startBtn" class="qnav primary" aria-label="Começar teste">Começar</button>
        <button id="learnMore" class="qnav" aria-label="Saber mais">Saiba mais</button>
      </div>
    </div>
  </main>

  <!-- CONTEÚDO DO TESTE -->
  <div id="app" class="container hidden" aria-hidden="true">
    <div class="qcont" role="application" aria-labelledby="qHeading">
      <h3 id="qHeading">Questão <span id="qnum">1</span> de 20</h3>

      <div class="progress" aria-hidden="true"><span id="progressBar"></span></div>

      <p class="question" id="questionText">Carregando pergunta...</p>

      <div class="anscont">
        <div class="labels-row">
          <span class="label-left">Discordo</span>
          <span class="label-right">Concordo</span>
        </div>

        <div class="slider-row">
          <div class="slider-cont">
            <input id="answerSlider" type="range" min="0" max="4" step="1" value="2" aria-label="Resposta" />
            <div class="divisions" aria-hidden="true">
              <span></span><span></span><span></span><span></span><span></span>
            </div>
          </div>
        </div>
      </div>

      <div class="process">
        <button id="prevBtn" class="qnav" aria-label="Pergunta anterior">ANTERIOR</button>
        <div class="spacer"></div>
        <button id="backToCover" class="qnav" aria-label="Voltar à capa">Voltar</button>
        <button id="nextBtn" class="qnav primary" aria-label="Próxima pergunta">PRÓXIMO</button>
      </div>
    </div>
  </div>

  <!-- Painel de resultado -->
  <div id="resultPanel" class="result-panel" aria-hidden="true">
    <div class="result-card" role="dialog" aria-modal="true" aria-labelledby="resultTitle">
      <h2 id="resultTitle"></h2>
      <div id="resultText" class="result-text"></div>
      <div class="result-meta" id="resultMeta"></div>

      <div class="result-actions">
      <button id="btnSalvarPdf">Salvar em PDF</button>
       <button id="btnRefazer">Refazer teste</button>
      <button id="btnFechar">FECHAR</button>
      </div>
    </div>
  </div>
<!-- incluir biblioteca (CDN) -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.3/html2pdf.bundle.min.js"></script>
<!-- botão que já existe: ajusta para disparar export -->
<script>
document.addEventListener('DOMContentLoaded', () => {
  const btnSalvar = document.getElementById('btnSalvarPdf') || document.querySelector('[data-action="salvar-pdf"]');
  const content = document.getElementById('resultado') || document.getElementById('content') || document.body;

  if (btnSalvar) {
    btnSalvar.addEventListener('click', () => {
      const opt = {
        margin:       10,
        filename:     'resultado.pdf',
        image:        { type: 'jpeg', quality: 0.98 },
        html2canvas:  { scale: 2, useCORS: true },
        jsPDF:        { unit: 'mm', format: 'a4', orientation: 'portrait' }
      };
      html2pdf().set(opt).from(content).save().catch(err => {
        console.error('Erro html2pdf:', err);
        alert('Falha ao gerar PDF no cliente. Tente usar o menu do navegador (Imprimir → Salvar como PDF).');
      });
    });
  }
});
</script>  
  <script>
document.addEventListener('DOMContentLoaded', () => {
  // FECHAR: fecha modal/resultado (oculta o elemento de resultado)
  const btnFechar = document.getElementById('btnFechar') || document.querySelector('[data-action="fechar"]');
  const areaResultado = document.getElementById('resultado') || document.querySelector('.resultado') || document.getElementById('content');

  if (btnFechar && areaResultado) {
    btnFechar.addEventListener('click', () => {
      areaResultado.style.display = 'none';
      // se houver um modal, remova a classe de aberto
      document.body.classList.remove('resultado-aberto');
    });
  }

  // REFAZER TESTE: limpa respostas e redireciona/mostra a primeira página
  const btnRefazer = document.getElementById('btnRefazer') || document.querySelector('[data-action="refazer-teste"]');
  if (btnRefazer) {
    btnRefazer.addEventListener('click', () => {
      // exemplo simples: recarrega a página
      window.location.href = window.location.pathname;
      // ou usar history.replaceState/mostrar tela inicial se for SPA
    });
  }
});
</script>

</body>
</html>

