<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Teste de Mindset</title>
  <link rel="stylesheet" href="styles.css">
  <script src="script.js" defer></script>
  <!-- html2pdf (versão única) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.2/html2pdf.bundle.min.js" integrity="sha512-MpDFIChbcXl2QgipQrt1VcPHMldRILetapBl5MPCA9Y8r7qvlwx1/Mc9hNTzY+kS5kX6PdoDq41ws1HiVNLdZA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

</head>
<body>
  <!-- CAPA / INTRO -->
  <main id="cover" class="cover" aria-hidden="false">
    <div class="cover-card" role="region" aria-labelledby="coverTitle">
      <h1 id="coverTitle" class="cover-title">Teste de Mindset</h1>
      <p class="cover-sub">Descubra como suas crenças sobre inteligência e talento influenciam sua abordagem diante de desafios e aprendizado.</p>
      <p class="cover-desc">Responda com sinceridade. Não há respostas certas — apenas reflexões sobre sua maneira de encarar esforço, talento e feedback.</p>
      <div class="cover-actions">
        <button id="startBtn" class="qnav primary" aria-label="Começar teste">Começar</button>
        <button id="learnMore" class="qnav" aria-label="Saber mais">Saiba mais</button>
      </div>
    </div>
  </main>

  <!-- CONTEÚDO DO TESTE -->
  <div id="app" class="container hidden" aria-hidden="true">
    <div class="qcont" role="application" aria-labelledby="qHeading">
      <h3 id="qHeading">Questão <span id="qnum">1</span> de 20</h3>

      <div class="progress" aria-hidden="true"><span id="progressBar"></span></div>

      <p class="question" id="questionText">Carregando pergunta...</p>

      <div class="anscont">
        <div class="labels-row">
          <span class="label-left">Discordo</span>
          <span class="label-right">Concordo</span>
        </div>

        <div class="slider-row">
          <div class="slider-cont">
            <input id="answerSlider" type="range" min="0" max="4" step="1" value="2" aria-label="Resposta" />
            <div class="divisions" aria-hidden="true">
              <span></span><span></span><span></span><span></span><span></span>
            </div>
          </div>
        </div>
      </div>

      <div class="process">
        <button id="prevBtn" class="qnav" aria-label="Pergunta anterior">ANTERIOR</button>
        <div class="spacer"></div>
        <button id="backToCover" class="qnav" aria-label="Voltar à capa">Voltar</button>
        <button id="nextBtn" class="qnav primary" aria-label="Próxima pergunta">PRÓXIMO</button>
      </div>
    </div>
  </div>

  <!-- Painel de resultado -->
  <div id="resultPanel" class="result-panel" aria-hidden="true" style="display:none;">
    <div id="resultCard" class="result-card" role="dialog" aria-modal="true" aria-labelledby="resultTitle">
      <h2 id="resultTitle">Seu resultado</h2>
      <div id="resultText" class="result-text">Aqui ficará o texto do resultado.</div>
      <div class="result-meta" id="resultMeta"></div>

      <div class="result-actions">
        <button id="btnSalvarPdf" class="qnav">Salvar em PDF</button>
        <button id="btnRefazer" class="qnav">Refazer teste</button>
        <button id="btnFechar" class="qnav">FECHAR</button>
      </div>
    </div>
  </div>

  <!-- Script mínimo: ações de salvar, fechar, refazer -->
  <script>
  (function(){
    // Seletores fixos
    const btnSalvar = document.getElementById('btnSalvarPdf');
    const btnFechar = document.getElementById('btnFechar');
    const btnRefazer = document.getElementById('btnRefazer');
    const resultPanel = document.getElementById('resultPanel');
    const resultCard = document.getElementById('resultCard');

    // Função para mostrar resultado (exemplo)
    window.showResult = function(title, text, meta){
      document.getElementById('resultTitle').textContent = title || 'Seu resultado';
      document.getElementById('resultText').innerHTML = text || '';
      document.getElementById('resultMeta').textContent = meta || '';
      resultPanel.style.display = 'flex';
      resultPanel.setAttribute('aria-hidden','false');
      // opcional: focar no diálogo para acessibilidade
      resultCard.focus && resultCard.focus();
    };

    // Salvar em PDF (gera PDF do card de resultado)
    btnSalvar && btnSalvar.addEventListener('click', function(e){
      e.preventDefault();
      const element = resultCard; // gera apenas o card, não toda a página
      const opt = {
        margin: 10,
        filename: 'resultado.pdf',
        image: { type: 'jpeg', quality: 0.98 },
        html2canvas: { scale: 2, useCORS: true },
        jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' }
      };
      try {
        html2pdf().set(opt).from(element).save().catch(err => {
          console.error('html2pdf error', err);
          alert('Falha ao gerar PDF no cliente. Tente usar Imprimir → Salvar como PDF.');
        });
      } catch (err) {
        console.error('Erro html2pdf', err);
        alert('Falha ao gerar PDF. Use Imprimir → Salvar como PDF.');
      }
    });

    // Fechar: oculta painel de resultado
    btnFechar && btnFechar.addEventListener('click', function(e){
      e.preventDefault();
      resultPanel.style.display = 'none';
      resultPanel.setAttribute('aria-hidden','true');
    });

    // Refazer: recarrega a página / reinicia o teste
    btnRefazer && btnRefazer.addEventListener('click', function(e){
      e.preventDefault();
      // Se preferir reiniciar via JS, substitua por lógica do SPA
      window.location.href = window.location.pathname;
    });

    // Exemplo: vincular botão Start para demonstrar o resultado (remova/ajuste conforme sua lógica)
    const startBtn = document.getElementById('startBtn');
    if (startBtn) {
      startBtn.addEventListener('click', function(){
        // exemplo rápido para mostrar painel de resultado
        showResult('Teste finalizado', '<p>Parabéns, aqui está um resumo do seu mindset.</p>', 'Pontuação: 78');
      });
    }
  })();
  </script>
</body>
</html>
```


